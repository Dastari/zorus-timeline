(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1697:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>e6});var n=a(58081),r=a(82149),i=a(8938),l=a(14665),s=a(35768),o=a(8492),d=a(51689),c=a(9927),u=a(64879),m=a(70899),h=a(29668),p=a(23484),f=a(76522),x=a(82442);function g(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.QP)((0,f.$)(t))}let v=(0,p.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function b(e){let{className:t,variant:a,size:r,asChild:i=!1,...l}=e,s=i?h.DX:"button";return(0,n.jsx)(s,{"data-slot":"button",className:g(v({variant:a,size:r,className:t})),...l})}function y(e){let{className:t,type:a,...r}=e;return(0,n.jsx)("input",{type:a,"data-slot":"input",className:g("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}function j(e){let{onFileSelect:t,accept:a=".csv",className:i,disabled:l=!1}=e,s=(0,r.useRef)(null);return(0,n.jsxs)("div",{className:g("flex items-center",i),children:[(0,n.jsx)(y,{ref:s,type:"file",accept:a,onChange:e=>{var a;let n=null===(a=e.target.files)||void 0===a?void 0:a[0];n&&(t(n),e.target.value="")},className:"hidden",disabled:l}),(0,n.jsxs)(b,{onClick:()=>{var e;null===(e=s.current)||void 0===e||e.click()},variant:"outline",size:"default",disabled:l,children:[(0,n.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Load CSV File"]})]})}var w=a(4168),N=a(78343);function T(e){let{className:t,classNames:a,showOutsideDays:r=!0,...i}=e;return(0,n.jsx)(N.hv,{showOutsideDays:r,className:g("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:g(v({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex justify-center space-x-1",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:g(v({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},...i})}var k=a(53672);function C(e){let{...t}=e;return(0,n.jsx)(k.bL,{"data-slot":"popover",...t})}function S(e){let{...t}=e;return(0,n.jsx)(k.l9,{"data-slot":"popover-trigger",...t})}function D(e){let{className:t,align:a="center",sideOffset:r=4,...i}=e;return(0,n.jsx)(k.ZL,{children:(0,n.jsx)(k.UC,{"data-slot":"popover-content",align:a,sideOffset:r,className:g("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...i})})}let P={hasEvents:{fontWeight:"bold"}};function M(e){let{selectedDate:t,onDateChange:a,className:i,disabled:l=!1,fromDate:s,toDate:o,highlightedDays:d=[]}=e,[c,m]=r.useState(!1),h=[];return l?h.push(()=>!0):(s&&h.push({before:s}),o&&h.push({after:o})),(0,n.jsxs)(C,{open:c,onOpenChange:e=>!l&&m(e),children:[(0,n.jsx)(S,{asChild:!0,children:(0,n.jsxs)(b,{variant:"outline",className:g("w-[280px] justify-start text-left font-normal",!t&&"text-muted-foreground",i,l&&"opacity-50 cursor-not-allowed"),disabled:l,children:[(0,n.jsx)(w.A,{className:"mr-2 h-4 w-4"}),t?(0,u.GP)(t,"PPP"):(0,n.jsx)("span",{children:"Pick a date"})]})}),(0,n.jsx)(D,{className:"w-auto p-0",children:(0,n.jsx)(T,{mode:"single",selected:t,onSelect:e=>{l||(a(e),m(!1))},initialFocus:!0,disabled:h.length>0?h:void 0,fromDate:s,toDate:o,modifiers:{hasEvents:d},modifiersStyles:P})})]})}var A=function(e){return e.WebPage="WebPage",e.Application="Application",e.Idle="Idle",e.Other="Other",e}({});let z={Application:"#3B82F6",WebPage:"#10B981",Idle:"#C0C0C0",Other:"#6B7280"};var E=function(e){return e.Hour="1h",e.ThreeHours="3h",e.SixHours="6h",e.TwelveHours="12h",e.Day="24h",e}({}),L=a(29555),U=a(95188),_=a(79352);function R(e){let{delayDuration:t=0,...a}=e;return(0,n.jsx)(_.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function O(e){let{...t}=e;return(0,n.jsx)(R,{children:(0,n.jsx)(_.bL,{"data-slot":"tooltip",...t})})}function W(e){let{...t}=e;return(0,n.jsx)(_.l9,{"data-slot":"tooltip-trigger",...t})}function F(e){let{className:t,sideOffset:a=0,children:r,...i}=e;return(0,n.jsx)(_.ZL,{children:(0,n.jsxs)(_.UC,{"data-slot":"tooltip-content",sideOffset:a,className:g("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[r,(0,n.jsx)(_.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var H=a(21773),V=a(60782),B=a(7168),I=a(62750);function G(e){let{className:t,...a}=e;return(0,n.jsx)(B.bL,{"data-slot":"checkbox",className:g("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,n.jsx)(B.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,n.jsx)(I.A,{className:"size-3.5"})})})}var K=a(50496);function Z(e){let{className:t,...a}=e;return(0,n.jsx)(K.b,{"data-slot":"label",className:g("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}let Y=[{key:"webPages",label:"Web",colorClass:"bg-activity-web",type:A.WebPage},{key:"applications",label:"Apps",colorClass:"bg-activity-app",type:A.Application},{key:"idle",label:"Idle",colorClass:"bg-activity-idle",type:A.Idle},{key:"other",label:"Other",colorClass:"bg-activity-other",type:A.Other}];function q(e){let{filters:t,onFilterChange:a,className:r}=e,i=Z||"label";return(0,n.jsxs)("div",{className:g("flex items-center space-x-4",r),children:[(0,n.jsx)("span",{className:"text-sm font-medium mr-2",children:"Show:"}),Y.map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:g("w-3 h-3 rounded-sm",e.colorClass)}),(0,n.jsx)(G,{id:"filter-".concat(e.key),checked:t[e.key],onCheckedChange:t=>a(e.key,!!t),"aria-label":"Filter ".concat(e.label)}),(0,n.jsx)(i,{htmlFor:"filter-".concat(e.key),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:e.label})]},e.key))]})}var Q=a(52163);let X=(0,p.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),$=r.createContext({size:"default",variant:"default"});function J(e){let{className:t,variant:a,size:r,children:i,...l}=e;return(0,n.jsx)(Q.bL,{"data-slot":"toggle-group","data-variant":a,"data-size":r,className:g("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",t),...l,children:(0,n.jsx)($.Provider,{value:{variant:a,size:r},children:i})})}function ee(e){let{className:t,children:a,variant:i,size:l,...s}=e,o=r.useContext($);return(0,n.jsx)(Q.q7,{"data-slot":"toggle-group-item","data-variant":o.variant||i,"data-size":o.size||l,className:g(X({variant:o.variant||i,size:o.size||l}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...s,children:a})}let et=[{level:E.Hour,label:"1h"},{level:E.ThreeHours,label:"3h"},{level:E.SixHours,label:"6h"},{level:E.TwelveHours,label:"12h"},{level:E.Day,label:"24h"}];function ea(e){let{zoomLevel:t,onZoomChange:a,className:r}=e;return(0,n.jsxs)("div",{className:g("flex items-center space-x-2",r),children:[(0,n.jsx)("span",{className:"text-sm font-medium mr-1",children:"Zoom:"}),(0,n.jsx)(J,{type:"single",value:t,onValueChange:e=>{e&&a(e)},"aria-label":"Timeline Zoom Level",children:et.map(e=>(0,n.jsx)(ee,{value:e.level,"aria-label":e.label,variant:"outline",size:"sm",children:e.label},e.level))})]})}let en={webPages:A.WebPage,applications:A.Application,idle:A.Idle,other:A.Other},er={[E.Hour]:60,[E.ThreeHours]:180,[E.SixHours]:360,[E.TwelveHours]:720,[E.Day]:1440};function ei(e){let{activities:t,filters:a,onFilterChange:l,zoomLevel:s,onZoomChange:o,selectedActivityId:d,className:c,currentDate:m,onActivityClick:h}=e,p=(0,r.useRef)(null),f=(0,r.useRef)(null),[x,v]=(0,r.useState)(0),[y,j]=(0,r.useState)(0),[w,N]=(0,r.useState)(()=>er[s]||1440),[T,k]=(0,r.useState)(null),[C,S]=(0,r.useState)(null),[D,P]=(0,r.useState)(!1),M=(0,r.useMemo)(()=>{let e=Object.entries(a).filter(e=>{let[,t]=e;return!0===t}).map(e=>{let[t]=e;return en[t]});return t.filter(t=>e.includes(t.type))},[t,a]);(0,r.useEffect)(()=>{let e=er[s]||1440;N(e),j(t=>B(t,e))},[s]);let E=(e,t,a,n)=>{e.clearRect(0,0,t,30),e.fillStyle="#6B7280",e.font="12px sans-serif",e.textAlign="center";let r=t/n,l=(0,i.o)(m),s=60;n<=60?s=5:n<=180?s=15:n<=360&&(s=30);let o=a+n,d=Math.ceil(a/s)*s;for(let i=d;i<=o;i+=s){let s=(i-a)*r,o=5,d=!1,c="h:mma";if(i%60==0?(o=10,d=n>=360,c="ha"):i%30==0?(o=7,d=n<360&&n>=180):i%15==0?(o=5,d=n<180&&n>=60):i%5==0&&(o=3,d=n<60),e.strokeStyle="#E5E7EB",e.beginPath(),e.moveTo(s,30-o),e.lineTo(s,30),e.stroke(),d){let a=(0,L.z)(l,i),n=(0,u.GP)(a,c).toLowerCase();s>20&&s<t-20&&e.fillText(n,s,30-o-4)}}},_=(e,t,a,n)=>{e.clearRect(0,30,t,50);let r=(0,i.o)(m),l=t/n,s=a+n;M.forEach(t=>{if(!(t.startTime instanceof Date)||!(t.endTime instanceof Date))return;let n=(0,U.o)(t.startTime,r),i=(0,U.o)(t.endTime,r);if(i<=a||n>=s)return;let o=Math.max(a,n),c=Math.min(s,i)-o;if(c<=0)return;let u=(o-a)*l,m=c*l;e.fillStyle=z[t.type]||z[A.Other],function(e,t,a,n,r,i){if(i=Math.min(i,n/2,25),n<2*i||50<2*i){e.fillRect(t,30,n,r);return}e.beginPath(),e.moveTo(t+i,30),e.lineTo(t+n-i,a),e.arcTo(t+n,a,t+n,a+i,i),e.lineTo(t+n,a+r-i),e.arcTo(t+n,a+r,t+n-i,a+r,i),e.lineTo(t+i,a+r),e.arcTo(t,a+r,t,a+r-i,i),e.lineTo(t,a+i),e.arcTo(t,a,t+i,a,i),e.closePath(),e.fill()}(e,u,30,m,50,3),t.id===d&&(e.save(),e.strokeStyle="#000000",e.lineWidth=1.5,function(e,t,a,n,r,i){if(i=Math.min(i,n/2,r/2),n<2*i||r<2*i){e.strokeRect(t,a,n,r);return}e.beginPath(),e.moveTo(t+i,a),e.lineTo(t+n-i,a),e.arcTo(t+n,a,t+n,a+i,i),e.lineTo(t+n,a+r-i),e.arcTo(t+n,a+r,t+n-i,a+r,i),e.lineTo(t+i,a+r),e.arcTo(t,a+r,t,a+r-i,i),e.lineTo(t,a+i),e.arcTo(t,a,t+i,a,i),e.closePath(),e.stroke()}(e,u+e.lineWidth/2,30+e.lineWidth/2,m-e.lineWidth,50-e.lineWidth,3),e.restore())})};(0,r.useEffect)(()=>{let e=p.current,t=f.current;if(!e||!t)return;let a=e.getContext("2d");if(!a)return;let{width:n}=t.getBoundingClientRect(),r=window.devicePixelRatio||1;e.width=Math.round(n*r),e.height=Math.round(80*r),e.style.width="".concat(n,"px"),e.style.height="".concat(80,"px"),a.scale(r,r),E(a,n,y,w),_(a,n,y,w)},[M,m,d,x,y,w]),(0,r.useEffect)(()=>{let e=f.current;if(!e)return;let t=new ResizeObserver(e=>{if(e[0]){let{width:t}=e[0].contentRect;v(t)}});return t.observe(e),v(e.getBoundingClientRect().width),()=>t.disconnect()},[]);let B=(e,t)=>Math.max(0,Math.min(e,Math.max(0,1440-t))),I=e=>{let t=.2*w;j(a=>B("left"===e?a-t:a+t,w))},G=(e,t)=>{if(!p.current||t<30||t>80||!x)return null;let a=x/w;if(a<=0)return null;let n=y+e/a,r=(0,i.o)(m);for(let t=M.length-1;t>=0;t--){let i=M[t];if(!(i.startTime instanceof Date)||!(i.endTime instanceof Date))continue;let l=(0,U.o)(i.startTime,r),s=(0,U.o)(i.endTime,r);if(n>=l&&n<s){let t=Math.max(y,l),n=(t-y)*a,r=(Math.min(y+w,s)-t)*a;if(e>=n&&e<n+r)return i}}return null},K=(0,r.useMemo)(()=>(0,L.z)((0,i.o)(m),y),[m,y]),Z=(0,r.useMemo)(()=>(0,L.z)(K,w),[K,w]);return(0,n.jsxs)("div",{className:g("flex flex-col",c),children:[(0,n.jsxs)("div",{className:"mb-2 px-1",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold",children:[(0,u.GP)(K,"MMMM do, yyyy")," (",(0,u.GP)(K,"h:mm a")," - ",(0,u.GP)(Z,"h:mm a"),")"]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Hold Shift + Scroll Wheel Zoom or use the presets below"})]}),(0,n.jsx)(R,{delayDuration:100,children:(0,n.jsxs)("div",{ref:f,className:g("w-full relative overflow-hidden"),style:{height:"".concat(80,"px"),overscrollBehavior:"contain"},onWheel:e=>{let t=p.current;if(t&&x&&e.shiftKey){e.preventDefault();let a=e.deltaY>0?1.15*w:w/1.15;if(Math.abs((a=Math.max(15,Math.min(1440,a)))-w)>1){let n=t.getBoundingClientRect(),r=e.clientX-n.left,i=y+r/(x/w)-r/(x/a);j(i=B(i,a)),N(a)}k(null),S(null)}},onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),children:[(0,n.jsx)("canvas",{ref:p,onClick:e=>{if(!p.current)return;let t=p.current.getBoundingClientRect(),a=G(e.clientX-t.left,e.clientY-t.top);h&&h(a)},onMouseMove:e=>{if(!p.current)return;let t=p.current.getBoundingClientRect(),a=G(e.clientX-t.left,e.clientY-t.top);k(a),a?S({x:e.clientX+15,y:e.clientY}):S(null)},onMouseLeave:()=>{k(null),S(null)},style:{display:"block",width:"100%",height:"100%",cursor:T?"pointer":"default"}}),D&&w<1440&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{variant:"outline",size:"icon",className:"absolute left-1 top-14 -translate-y-1/2 z-10 h-8 w-8 opacity-70 hover:opacity-100",onClick:()=>I("left"),disabled:y<=0,children:(0,n.jsx)(H.A,{className:"h-4 w-4"})}),(0,n.jsx)(b,{variant:"outline",size:"icon",className:"absolute right-1 top-14 -translate-y-1/2 z-10 h-8 w-8 opacity-70 hover:opacity-100",onClick:()=>I("right"),disabled:y>=1440-w,children:(0,n.jsx)(V.A,{className:"h-4 w-4"})})]}),T&&C&&(0,n.jsxs)(O,{open:!0,children:[(0,n.jsx)(W,{style:{position:"fixed",left:"".concat(C.x,"px"),top:"".concat(C.y,"px"),width:0,height:0,pointerEvents:"none"}}),(0,n.jsxs)(F,{side:"top",align:"start",children:[(0,n.jsx)("p",{className:"font-medium",children:T.title}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,u.GP)(T.startTime,"h:mm:ss a")," -"," ",(0,u.GP)(T.endTime,"h:mm:ss a")]}),(0,n.jsxs)("p",{className:"text-xs",children:["Duration: ",T.durationMinutes," min"]}),(0,n.jsxs)("p",{className:"text-xs",children:["Type: ",T.type]}),T.applicationName&&(0,n.jsxs)("p",{className:"text-xs",children:["App: ",T.applicationName]}),T.url&&(0,n.jsxs)("p",{className:"text-xs",children:["URL: ",T.url]})]})]})]})}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-2 px-2 py-1",children:[(0,n.jsx)(q,{filters:a,onFilterChange:l}),(0,n.jsx)(ea,{zoomLevel:s,onZoomChange:o})]})]})}var el=a(63818),es=a(34263),eo=a(35440),ed=a(43624),ec=a(92500),eu=a(8222);function em(e){let{...t}=e;return(0,n.jsx)(ec.bL,{"data-slot":"dialog",...t})}function eh(e){let{...t}=e;return(0,n.jsx)(ec.ZL,{"data-slot":"dialog-portal",...t})}function ep(e){let{className:t,...a}=e;return(0,n.jsx)(ec.hJ,{"data-slot":"dialog-overlay",className:g("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function ef(e){let{className:t,children:a,...r}=e;return(0,n.jsxs)(eh,{"data-slot":"dialog-portal",children:[(0,n.jsx)(ep,{}),(0,n.jsxs)(ec.UC,{"data-slot":"dialog-content",className:g("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[a,(0,n.jsxs)(ec.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,n.jsx)(eu.A,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ex(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"dialog-header",className:g("flex flex-col gap-2 text-center sm:text-left",t),...a})}function eg(e){let{className:t,...a}=e;return(0,n.jsx)(ec.hE,{"data-slot":"dialog-title",className:g("text-lg leading-none font-semibold",t),...a})}function ev(e){let{className:t,...a}=e;return(0,n.jsx)(ec.VY,{"data-slot":"dialog-description",className:g("text-muted-foreground text-sm",t),...a})}function eb(e){let{activity:t,onClose:a}=e,i=r.useMemo(()=>{if(!t)return el.A;switch(t.type){case A.WebPage:return es.A;case A.Application:return eo.A;case A.Idle:return ed.A;default:return el.A}},[t]);return t?(0,n.jsx)(em,{open:!!t,onOpenChange:e=>!e&&a(),children:(0,n.jsxs)(ef,{className:"sm:max-w-[525px]",children:[(0,n.jsxs)(ex,{children:[(0,n.jsxs)(eg,{className:"flex items-center",children:[(0,n.jsx)(i,{className:"mr-2 h-5 w-5"}),"Activity Details"]}),(0,n.jsx)(ev,{children:"Detailed information about the selected activity period."})]}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsx)(ey,{label:"Title",value:t.title}),(0,n.jsx)(ey,{label:"Type",value:t.type}),(0,n.jsx)(ey,{label:"Start Time",value:(0,u.GP)(t.startTime,"PPpp")}),(0,n.jsx)(ey,{label:"End Time",value:(0,u.GP)(t.endTime,"PPpp")}),(0,n.jsx)(ey,{label:"Duration",value:"".concat(t.durationMinutes," minutes")}),t.type===A.WebPage&&t.url&&(0,n.jsx)(ey,{label:"URL",value:t.url,isLink:!0}),t.type===A.Application&&t.applicationName&&(0,n.jsx)(ey,{label:"Application",value:t.applicationName}),t.category&&(0,n.jsx)(ey,{label:"Category",value:t.category}),t.details&&(0,n.jsx)(ey,{label:"Details",value:t.details})]})]})}):null}function ey(e){let{label:t,value:a,isLink:r=!1}=e;return(0,n.jsxs)("div",{className:"grid grid-cols-3 items-center gap-4",children:[(0,n.jsxs)("span",{className:"text-right font-medium text-muted-foreground col-span-1",children:[t,":"]}),(0,n.jsx)("div",{className:"col-span-2 text-sm",children:r?(0,n.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80 break-all",children:a}):(0,n.jsx)("span",{className:"break-words",children:a})})]})}var ej=a(35313),ew=a(10272),eN=a(58661),eT=a(38336),ek=a(11716),eC=a(36653);function eS(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card",className:g("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function eD(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:g("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function eP(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:g("leading-none font-semibold",t),...a})}function eM(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:g("px-6",t),...a})}var eA=a(52544);function ez(e){if(!e||0===e.length)return[];e.sort((e,t)=>e.start.getTime()-t.start.getTime());let t=[],a=structuredClone(e[0]);for(let n=1;n<e.length;n++){let r=e[n];r.start<=a.end?r.end>a.end&&(a.end=r.end):(t.push(a),a=structuredClone(r))}return t.push(a),t}function eE(e){let t=0;return e.forEach(e=>{let a=Math.max(0,(0,eA.O)(e.end,e.start));t+=a}),t/60}let eL=e=>{if(e<1)return"< 1 min";let t=Math.floor(e/60),a=Math.round(e%60),n="";return t>0&&(n+="".concat(t,"h ")),(a>0||0===t)&&(n+="".concat(a,"m")),n.trim()};function eU(e){let{activities:t}=e,a=r.useMemo(()=>{let e=t.filter(e=>e.type!==A.Idle),a=t.filter(e=>e.type===A.Idle),n=eE(ez(e.map(e=>e.startTime instanceof Date&&e.endTime instanceof Date?{start:e.startTime,end:e.endTime}:(console.warn("Invalid date in non-idle activity:",e),null)).filter(e=>null!==e))),r={},i=0;e.forEach(e=>{let t=e.durationMinutes;r[e.type]=(r[e.type]||0)+t,i+=t});let l=[];i>0?Object.entries(r).forEach(e=>{let[t,a]=e;if(a&&a>0){let e=Math.round(a/i*n);e>0&&l.push({name:t,duration:e})}}):n>0&&console.warn("Total active time > 0 but raw durations sum to 0.");let s=eE(ez(a.map(e=>e.startTime instanceof Date&&e.endTime instanceof Date?{start:e.startTime,end:e.endTime}:(console.warn("Invalid date in idle activity:",e),null)).filter(e=>null!==e)));return s>0&&l.push({name:A.Idle,duration:s}),l.filter(e=>e.duration>0)},[t]);return t&&0!==t.length&&0!==a.length?(0,n.jsxs)(eS,{children:[(0,n.jsx)(eD,{children:(0,n.jsx)(eP,{children:"Activity Type Breakdown (by Duration)"})}),(0,n.jsx)(eM,{children:(0,n.jsx)(ej.u,{width:"100%",height:300,children:(0,n.jsxs)(ew.r,{children:[(0,n.jsx)(eN.F,{data:a,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"duration",nameKey:"name",children:a.map((e,t)=>(0,n.jsx)(eT.f,{fill:z[e.name]||"#cccccc"},"cell-".concat(t)))}),(0,n.jsx)(ek.m,{formatter:(e,t)=>["".concat(t,": ").concat(eL(e)),null]}),(0,n.jsx)(eC.s,{})]})})})]}):(0,n.jsxs)(eS,{children:[(0,n.jsx)(eD,{children:(0,n.jsx)(eP,{children:"Activity Type Breakdown"})}),(0,n.jsx)(eM,{children:(0,n.jsx)("p",{className:"text-center text-muted-foreground",children:"No activity data for this day."})})]})}var e_=a(39974),eR=a(20619),eO=a(99020),eW=a(90207),eF=a(51466);let eH=e=>{if(e<1)return"< 1 min";let t=Math.floor(e/60),a=Math.round(e%60),n="";return t>0&&(n+="".concat(t,"h ")),(a>0||0===t)&&(n+="".concat(a,"m")),n.trim()};function eV(e){let{activities:t}=e,a=r.useMemo(()=>{let e={};return(null!=t?t:[]).filter(e=>e.type===A.Application&&e.applicationName).forEach(t=>{let a=t.applicationName;e[a]||(e[a]=[]),t.startTime instanceof Date&&t.endTime instanceof Date?e[a].push({start:t.startTime,end:t.endTime}):console.warn("Skipping app activity due to invalid dates:",t)}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,duration:eE(ez(a))}}).filter(e=>e.duration>0).sort((e,t)=>t.duration-e.duration)},[t]).slice(0,10);return t&&0!==t.length&&0!==a.length?(0,n.jsxs)(eS,{children:[(0,n.jsx)(eD,{children:(0,n.jsx)(eP,{children:"Application Usage Breakdown (Top 10 by Duration)"})}),(0,n.jsx)(eM,{className:"pl-0",children:(0,n.jsx)(ej.u,{width:"100%",height:300,children:(0,n.jsxs)(e_.E,{data:a,layout:"vertical",margin:{top:5,right:30,left:0,bottom:5},children:[(0,n.jsx)(eR.d,{strokeDasharray:"3 3"}),(0,n.jsx)(eO.W,{type:"number",dataKey:"duration",tickFormatter:eH,name:"Time Spent"}),(0,n.jsx)(eW.h,{dataKey:"name",type:"category",width:200,interval:0,tick:{fontSize:11}}),(0,n.jsx)(ek.m,{formatter:(e,t,a)=>["".concat(a.payload.name,": ").concat(eH(e)),null],cursor:{fill:"transparent"}}),(0,n.jsx)(eC.s,{formatter:()=>"Time Spent"}),(0,n.jsx)(eF.y,{dataKey:"duration",fill:z[A.Application],name:"Time Spent"})]})})})]}):(0,n.jsxs)(eS,{children:[(0,n.jsx)(eD,{children:(0,n.jsx)(eP,{children:"Application Usage Breakdown"})}),(0,n.jsx)(eM,{children:(0,n.jsx)("p",{className:"text-center text-muted-foreground",children:"No application activity data for this day."})})]})}let eB=e=>{if(!e)return null;try{let t=new URL(e);if(!t.hostname&&t.protocol&&"http:"!==t.protocol&&"https:"!==t.protocol)return t.protocol.replace(/:$/,"")||"local";return t.hostname.replace(/^www\./,"")}catch(t){return console.warn("Could not parse URL: ".concat(e)),"invalid_url"}},eI=e=>{if(e<1)return"< 1 min";let t=Math.floor(e/60),a=Math.round(e%60),n="";return t>0&&(n+="".concat(t,"h ")),(a>0||0===t)&&(n+="".concat(a,"m")),n.trim()};function eG(e){let{activities:t}=e,a=r.useMemo(()=>{let e={};return(null!=t?t:[]).filter(e=>e.type===A.WebPage&&e.url).forEach(t=>{let a=eB(t.url);a&&(e[a]||(e[a]=[]),t.startTime instanceof Date&&t.endTime instanceof Date?e[a].push({start:t.startTime,end:t.endTime}):console.warn("Skipping web activity due to invalid dates:",t))}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,duration:eE(ez(a))}}).filter(e=>e.duration>0).sort((e,t)=>t.duration-e.duration)},[t]).slice(0,10);return t&&0!==t.length&&0!==a.length?(0,n.jsxs)(eS,{children:[(0,n.jsx)(eD,{children:(0,n.jsx)(eP,{children:"Website Usage Breakdown (Top 10 by Domain)"})}),(0,n.jsx)(eM,{className:"pl-0",children:(0,n.jsx)(ej.u,{width:"100%",height:300,children:(0,n.jsxs)(e_.E,{data:a,layout:"vertical",margin:{top:5,right:30,left:0,bottom:5},children:[(0,n.jsx)(eR.d,{strokeDasharray:"3 3"}),(0,n.jsx)(eO.W,{type:"number",dataKey:"duration",tickFormatter:eI,name:"Time Spent"}),(0,n.jsx)(eW.h,{dataKey:"name",type:"category",width:200,interval:0,tick:{fontSize:11}}),(0,n.jsx)(ek.m,{formatter:(e,t,a)=>["".concat(a.payload.name,": ").concat(eI(e)),null],cursor:{fill:"transparent"}}),(0,n.jsx)(eC.s,{formatter:()=>"Time Spent"}),(0,n.jsx)(eF.y,{dataKey:"duration",fill:"#10B981",name:"Time Spent"})]})})})]}):(0,n.jsxs)(eS,{children:[(0,n.jsx)(eD,{children:(0,n.jsx)(eP,{children:"Website Usage Breakdown (Top 10 by Domain)"})}),(0,n.jsx)(eM,{children:(0,n.jsx)("p",{className:"text-center text-muted-foreground",children:"No website activity data for this day."})})]})}var eK=a(14327),eZ=a(18337);let eY=e=>{if(e<=0)return"< 1 sec";let t=Math.round(60*e);if(t<60)return"".concat(t,"s");let a=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60,i="";return a>0&&(i+="".concat(a,"h ")),n>0&&(i+="".concat(n,"m ")),(r>0||""===i)&&(i+="".concat(r,"s")),i.trim()};function eq(e){let{activities:t,className:a}=e,r=Array.from({length:24},(e,t)=>t);if(!t||0===t.length)return null;let l=t.length>0?(0,i.o)(t[0].startTime):new Date;return(0,n.jsxs)("div",{className:g("w-full border rounded-lg p-6 bg-card",a),children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Hourly Activity Breakdown"}),(0,n.jsx)(R,{delayDuration:150,children:(0,n.jsx)("div",{className:"space-y-1.5",children:r.map(e=>{let a=new Date(l);a.setHours(e,0,0,0);let r=new Date(a);r.setHours(e+1,0,0,0);let i=t.filter(e=>e.startTime<r&&e.endTime>a),s=(0,u.GP)(a,"ha").toLowerCase();return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"w-10 text-xs text-right text-muted-foreground font-mono flex-shrink-0",children:s}),(0,n.jsx)("div",{className:"flex-1 h-5 bg-muted rounded relative overflow-hidden",children:i.map(t=>{let i=(0,eK.T)([t.startTime,a]),l=(0,eZ.j)([t.endTime,r]),s=(0,eA.O)(i,a),o=Math.max(0,(0,eA.O)(l,a)-s);if(o<=0)return null;let d=z[t.type]||z[A.Other],c=eY(t.durationMinutes);return(0,n.jsxs)(O,{children:[(0,n.jsx)(W,{asChild:!0,children:(0,n.jsx)("div",{className:"absolute h-full hover:opacity-80 transition-opacity",style:{left:"".concat(s/3600*100,"%"),width:"".concat(o/3600*100,"%"),backgroundColor:d},"aria-label":"".concat(t.title," (").concat(c,")")})}),(0,n.jsxs)(F,{side:"top",align:"center",className:"text-xs max-w-xs break-words",children:[(0,n.jsx)("p",{className:"font-medium mb-1",children:t.title}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"Time:"})," ",(0,u.GP)(t.startTime,"HH:mm:ss")," -"," ",(0,u.GP)(t.endTime,"HH:mm:ss")]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"Duration:"})," ",c]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"Type:"})," ",t.type]}),t.type===A.WebPage&&t.url&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"URL:"})," ",t.url]}),t.type===A.Application&&t.applicationName&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"App:"})," ",t.applicationName]}),t.category&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"Category:"})," ",t.category]}),t.details&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"Details:"})," ",t.details]})]})]},t.id+"-"+e)})})]},e)})})})]})}var eQ=a(93494),eX=a(7425);let e$=e=>{if(e<1)return"< 1 min";let t=Math.floor(e/60),a=Math.round(e%60),n="";return t>0&&(n+="".concat(t,"h ")),(a>0||0===t)&&(n+="".concat(a,"m")),n.trim()};function eJ(e){let{activities:t,className:a}=e,i=r.useMemo(()=>{let e={};return(null!=t?t:[]).forEach(t=>{if(t.type!==A.Idle){let a=t.username||"Unknown User";e[a]||(e[a]=[]),t.startTime instanceof Date&&t.endTime instanceof Date?e[a].push({start:t.startTime,end:t.endTime}):console.warn("Skipping activity due to invalid date objects:",t)}}),Object.entries(e).map(e=>{let[t,a]=e;return{username:t,totalActiveMinutes:eE(ez(a))}}).sort((e,t)=>t.totalActiveMinutes-e.totalActiveMinutes)},[t]);return(0,n.jsxs)(eS,{className:g("py-0 gap-0 bg-slate-950 text-white",a),children:[(0,n.jsx)(eD,{className:"p-4 pb-0",children:(0,n.jsxs)(eP,{className:"text-base font-medium flex items-center",children:[(0,n.jsx)(eQ.A,{className:"h-4 w-4 mr-2"}),"Daily User Summaries"]})}),(0,n.jsx)(eM,{className:"p-4 pt-2 text-sm",children:i.length>0?i.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(eX.A,{className:"h-4 w-4 mr-2 text-white"}),(0,n.jsx)("span",{children:e.username})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(ed.A,{className:"h-4 w-4 mr-1 text-white"}),(0,n.jsx)("span",{className:"font-semibold",children:e$(e.totalActiveMinutes)})]})]},e.username)):(0,n.jsx)("p",{className:"text-muted-foreground italic py-1",children:"No user activity data for this day."})})]})}var e0=a(53775),e1=a(83777),e2=a.n(e1);function e4(e){if(!e)return null;try{let t=parseFloat(String(e));if(isNaN(t))return null;let a=new Date(t>1e11?t:1e3*t);return(0,e0.f)(a)?a:null}catch(e){return null}}async function e5(e){return new Promise((t,a)=>{e2().parse(e,{header:!0,skipEmptyLines:!0,complete:e=>{try{if(e.errors.length>0&&console.error("CSV Parsing errors:",e.errors),!e.data||0===e.data.length)throw Error("CSV file is empty or has no data rows.");let a=Object.keys(e.data[0]).map(e=>e.trim()),s=e=>{for(let t of e){let e=a.find(e=>e.toLowerCase()===t.toLowerCase());if(e)return e}return null},o=s(["Start UTC Timestamp"]),d=s(["End UTC Timestamp"]),c=s(["Activity Type","Type"]),u=s(["Application","ApplicationName"]),m=s(["Website","URL"]),h=s(["Window Title","Title"]),p=s(["Category","Categories"]),f=s(["Logged In User"]);if(!(o&&d))throw Error('Required date headers "Start UTC Timestamp" and "End UTC Timestamp" not found.');if(!c)throw Error('Required header "Activity Type" not found.');if(!f)throw Error('Required header "Logged In User" not found.');let x=null,g=null,v=[],b=0;for(let t=0;t<e.data.length;t++){var n,r,l;b++;let a=e.data[t],i=e4(String(a[o])),s=e4(String(a[d])),y=String(null!==(n=a[c])&&void 0!==n?n:"Other"),j=function(e){let t=String(e).toLowerCase();return t.includes("web")||t.includes("http")?A.WebPage:t.includes("app")||t.includes("program")||t.includes("exe")?A.Application:t.includes("idle")||t.includes("lock")||t.includes("away")?A.Idle:A.Other}(y);if(!i||!s){console.warn("Skipping row ".concat(t+2,": Could not parse valid UTC timestamps."));continue}let w=(0,U.o)(s,i);if(w<0){console.warn("Skipping row ".concat(t+2,": Negative duration calculated (").concat(w," mins). Start: ").concat(i,", End: ").concat(s));continue}0===w&&i.getTime()!==s.getTime()&&(w=1),(!x||i<x)&&(x=i),(!g||s>g)&&(g=s);let N=null!=a[null!=u?u:""]?String(a[null!=u?u:""]):void 0,T=null!=a[null!=m?m:""]?String(a[null!=m?m:""]):void 0,k=String(null!==(r=a[null!=h?h:""])&&void 0!==r?r:"N/A"),C=null!=a[null!=p?p:""]?String(a[null!=p?p:""]):void 0,S=String(null!==(l=a[f])&&void 0!==l?l:"Unknown User").trim(),D={id:"csv-".concat(t),type:j,title:k,startTime:i,endTime:s,durationMinutes:w,username:S||"Unknown User",applicationName:N,url:T,category:C};v.push(D)}if(!x||!g)throw Error("Could not determine date range from the CSV file.");if(0===v.length)throw Error("No valid activity rows found or parsed in the CSV file.");t({activities:v.sort((e,t)=>e.startTime.getTime()-t.startTime.getTime()),startDate:(0,i.o)(x),endDate:(0,i.o)(g),totalEventCount:b})}catch(e){console.error("Error processing parsed CSV data:",e),a(e instanceof Error?e:Error("Failed to process CSV data."))}},error:e=>{console.error("PapaParse error:",e),a(Error("CSV parsing failed: ".concat(e.message)))}})})}var e3=a(19651);function e6(){var e;let t=(0,e3.useSearchParams)(),[a,m]=(0,r.useState)([]),[h,p]=(0,r.useState)(""),[f,x]=(0,r.useState)(null),[g,v]=(0,r.useState)(null),[w,N]=(0,r.useState)((0,i.o)(new Date)),[T,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(null),[D,P]=(0,r.useState)({webPages:!0,applications:!0,idle:!0,other:!0}),[A,z]=(0,r.useState)(E.Day),[L,U]=(0,r.useState)(null),_=(0,r.useCallback)((e,t)=>{k(!0),S(null),m([]),v(null),x(null),e5(e).then(e=>{m(e.activities),v({start:e.startDate,end:e.endDate}),x({startDate:e.startDate,endDate:e.endDate,totalEventCount:e.totalEventCount,source:t}),N((0,i.o)(e.endDate)),S(null)}).catch(e=>{console.error("Error processing CSV data:",e),S(e instanceof Error?e.message:"Failed to parse CSV data."),m([]),v(null),x(null)}).finally(()=>{k(!1)})},[]),R=(0,r.useCallback)(async e=>{let t=e||h;if(!t){S("Please enter a URL.");return}console.log("Attempting to load CSV from URL: ".concat(t)),k(!0),S(null),m([]),v(null),x(null);try{let e=await fetch(t);if(!e.ok)throw Error("Failed to fetch CSV: ".concat(e.status," ").concat(e.statusText));let a=await e.text();console.log("Successfully fetched ".concat(a.length," characters.")),_(a,t)}catch(e){console.error("Failed to load from URL:",e),S(e instanceof Error?e.message:"Failed to load data from URL."),k(!1)}},[h,_]),O=(0,r.useCallback)(async e=>{console.log("Processing local file: ".concat(e.name)),_(await e.text(),e.name)},[_]),W=(0,r.useCallback)(()=>{console.log("Unloading CSV data and clearing URL parameter."),m([]),v(null),x(null),p(""),N((0,i.o)(new Date)),S(null),k(!1);{let e=new URL(window.location.href);e.searchParams.delete("url"),window.history.pushState({},"",e.toString())}},[]);(0,r.useEffect)(()=>{let e=null==t?void 0:t.get("url");e?(console.log("Query Param Check: Found URL parameter: ".concat(e)),T||(null==f?void 0:f.source)===e?(console.log("Query Param Check: Skipping load for ".concat(e," (already loaded/loading/matches current?)")),e!==h&&p(e)):(console.log("Query Param Load: Triggering load for ".concat(e)),p(e),R(e))):console.log("Query Param Check: No URL parameter found.")},[t]);let F=(0,r.useMemo)(()=>{let e=a.filter(e=>(0,l.r)(e.startTime,w)),t=(null==f?void 0:f.source)||"csv-data";return 0===a.length?null:{date:w,activities:e,userId:t,username:t}},[w,a,null==f?void 0:f.source]),B=(0,r.useMemo)(()=>{let e=new Set;return a.forEach(t=>{e.add((0,i.o)(t.startTime).getTime())}),Array.from(e).map(e=>new Date(e))},[a]),I=(0,r.useCallback)(e=>{e&&e.getTime()!==w.getTime()&&(N((0,i.o)(e)),U(null))},[w]),G=(0,r.useCallback)((e,t)=>{P(a=>({...a,[e]:t}))},[]),K=(0,r.useCallback)(e=>{console.log("Zoom changed to:",e),z(e)},[]),Z=(0,r.useCallback)(e=>{U(e)},[]),Y=(0,r.useCallback)(()=>{U(null)},[]),q=(0,r.useCallback)(()=>{let e=(0,s.e)(w,1);!(g&&(0,o.Y)(e,g.start))&&(N(e),U(null))},[w,g]),Q=(0,r.useCallback)(()=>{let e=(0,d.f)(w,1);!(g&&(0,c.d)(e,g.end))&&(N(e),U(null))},[w,g]),X=!g||!(0,l.r)(w,g.start),$=!g||!(0,l.r)(w,g.end),J=(null==f?void 0:f.source)?"Timeline Activity (".concat(f.source,")"):"Load CSV Data";return(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-end gap-4 p-4 border rounded-md bg-white shadow-md",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-[300px]",children:[(0,n.jsx)("label",{htmlFor:"csv-url-input",className:"block text-sm font-medium mb-1",children:"Load CSV from URL"}),(0,n.jsx)(y,{id:"csv-url-input",type:"url",placeholder:"https://.../data.csv",value:h,onChange:e=>p(e.target.value),disabled:T})]}),(0,n.jsx)(b,{onClick:()=>R(),disabled:T||!h,children:"Load from URL"}),(0,n.jsx)("div",{className:"text-center text-sm text-muted-foreground mx-2 self-center",children:"OR"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(j,{onFileSelect:O,disabled:T,className:"self-end"}),(a.length>0||f)&&(0,n.jsx)(b,{onClick:W,disabled:T,className:"self-end",variant:"secondary",children:"Unload Data"})]})]}),F?(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 rounded-md border p-1 bg-white",children:[(0,n.jsx)(b,{variant:"ghost",size:"icon",onClick:q,disabled:!X||T,children:(0,n.jsx)(H.A,{className:"h-4 w-4"})}),(0,n.jsx)(M,{selectedDate:w,onDateChange:I,disabled:T,fromDate:null==g?void 0:g.start,toDate:null==g?void 0:g.end,highlightedDays:B,className:"border-0 bg-white shadow-none"}),(0,n.jsx)(b,{variant:"ghost",size:"icon",onClick:Q,disabled:!$||T,children:(0,n.jsx)(V.A,{className:"h-4 w-4"})})]}),(0,n.jsx)("div",{className:"text-lg font-semibold",children:(0,u.GP)(w,"PPP")})]})}),F.activities.length>0&&(0,n.jsx)(eJ,{activities:F.activities}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,n.jsxs)("div",{className:"lg:col-span-4 border rounded-lg p-4 bg-card min-h-[150px]",children:[T&&(0,n.jsx)("div",{className:"text-center p-4",children:"Loading data..."}),C&&(0,n.jsxs)("div",{className:"text-destructive text-center p-4",children:["Error: ",C]}),!T&&!C&&!(null==F?void 0:F.activities.length)&&(0,n.jsx)("div",{className:"text-center p-4 text-muted-foreground",children:"No activity data found for the selected date."}),!T&&!C&&F&&F.activities.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-2 text-center font-medium text-sm text-muted-foreground",children:J}),(0,n.jsx)(ei,{activities:F.activities,filters:D,onFilterChange:G,zoomLevel:A,onZoomChange:K,onActivityClick:Z,selectedActivityId:null!==(e=null==L?void 0:L.id)&&void 0!==e?e:null,currentDate:w})]})]})}),(0,n.jsx)(eb,{activity:L,onClose:Y}),F&&F.activities.length>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,n.jsx)(eV,{activities:F.activities}),(0,n.jsx)(eG,{activities:F.activities}),(0,n.jsx)(eU,{activities:F.activities})]})}),F&&F.activities.length>0&&(0,n.jsx)("div",{children:(0,n.jsx)(eq,{activities:F.activities})})]}):(0,n.jsx)("div",{className:"text-center p-8 text-muted-foreground",children:T?"Loading data...":C?"Error: ".concat(C):"Load a CSV file via URL or upload to view activity."})]})}},7098:(e,t,a)=>{Promise.resolve().then(a.bind(a,1697))}},e=>{var t=t=>e(e.s=t);e.O(0,[270,497,954,358],()=>t(7098)),_N_E=e.O()}]);